# 工具选择理由简洁化改进

## 改进前后对比

### 改进前（冗长）
- "基于关键词匹配分析，excel_reader工具（读取Excel文件内容）与用户查询最相关（得分: 8）"
- "默认选择readwise-mcp端点的第一个可用工具作为默认选项"
- "使用excel_reader工具（读取Excel文件内容）来处理用户查询: 读取Excel文件中的数据"

### 改进后（简洁）
- "适合读取操作"
- "适合写入操作"  
- "适合查询操作"
- "适合列表操作"
- "关键词匹配度最高"
- "默认选择"

## AI提示词优化

在AI提示词中明确要求：
```
"reason": "简洁理由（30字内）",
```

并在注意事项中强调：
```
5. 理由必须简洁，控制在30个字以内，只说明核心原因
```

## 示例场景

### 场景1：读取Excel文件
**用户查询**："读取sales.xlsx文件的数据"
**选择工具**：excel_reader
**选择理由**："适合读取Excel文件"（12字）

### 场景2：保存数据到数据库
**用户查询**："将处理结果保存到数据库"  
**选择工具**：db_writer
**选择理由**："专门用于数据库写入"（10字）

### 场景3：搜索文档
**用户查询**："在所有文档中搜索关键词'产品规格'"
**选择工具**：document_search
**选择理由**："全文搜索功能强大"（9字）

## 预期效果

在任务规划确认页面中，用户将看到：

```
步骤 1：分析用户查询意图，理解任务需求
工具：AI助手
选择理由：分析查询意图
目标：深入理解用户查询的具体需求和目标

步骤 2：使用 readwise-mcp 端点的 search_highlights 工具执行任务  
工具：search_highlights
选择理由：适合搜索高亮内容
目标：搜索并获取相关的高亮内容

步骤 3：整合所有步骤的执行结果，生成最终回答
工具：AI助手
选择理由：整合分析结果
目标：将各个步骤的执行结果进行整合，形成完整、准确的最终回答
```

## 总结

通过这次改进：
1. 工具选择理由从50-100字缩减到10-30字
2. 去除了冗余的技术细节（如得分、工具描述等）
3. 只保留核心的选择原因
4. 提升了用户阅读体验，使界面更加简洁清晰
